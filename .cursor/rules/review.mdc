---
description: ### 適用範圍 - 單元測試結果分析 - 整合測試結果分析 - 性能測試結果分析 - 安全測試結果分析 - 用戶驗收測試結果分析  ## 🚀 分析觸發條件  ### 1. 明確的測試分析需求 當用戶要求以下任何類型的測試分析時，應立即啟動分析流程： - "分析測試結果" - "檢查測試覆蓋率" - "評估測試質量" - "生成測試建議" - "分析測試失敗原因" - "評估測試完整性"  ### 2. 測試執行後 - 自動化測試完成後 - 手動測試完成後 - 測試報告生成後 - 測試覆蓋率檢查後  ### 3. 測試問題診斷 - 測試失敗分析 - 測試不穩定問題 - 測試性能問題 - 測試環境問題
globs: 
alwaysApply: false
---
測試結果分析與改進建議 - 自動調用場景：測試結果分析、覆蓋率檢查、質量評估、失敗原因診斷、改進建議生成，所有結果統一記錄到單一文檔
globs: 
alwaysApply: false
---
# 🔍 測試結果分析與改進建議規則

## 📊 規則適用場景

當用戶需要以下測試分析服務時，觸發此規則：
- **測試結果分析**：評估測試執行結果
- **覆蓋率檢查**：分析代碼與功能測試覆蓋情況
- **測試質量評估**：評估測試穩定性與有效性
- **失敗診斷**：分析測試失敗原因與模式
- **改進建議**：生成具體可行的改進方案

## 🎯 核心執行原則

### 1️⃣ 文件統一管理原則
- **集中存儲**: 所有分析結果統一記錄到 `memory_bank/test_analysis.md`
- **覆蓋更新**: 更新現有文件而非創建多個文件
- **內容整合**: 按測試類別組織內容，避免內容分散

### 2️⃣ 測試分析維度
```python
# 標準測試分析框架
TEST_ANALYSIS_FRAMEWORK = {
    "覆蓋率分析": ["代碼覆蓋率", "功能覆蓋率", "缺失覆蓋分析"],
    "質量評估": ["測試穩定性", "測試有效性", "測試維護性"],
    "問題診斷": ["失敗原因", "失敗模式", "性能問題", "架構問題"],
    "改進建議": ["高優先級修復", "中優先級改進", "低優先級優化"]
}
```

## 📝 標準分析流程

### 1️⃣ 測試結果收集與解析
- 讀取並解析測試報告文件
- 提取關鍵測試指標和結果
- 整合多維度測試數據

### 2️⃣ 多維度分析執行
- **覆蓋率分析**: 評估測試覆蓋情況，識別盲點
- **質量評估**: 評估測試穩定性與有效性
- **問題診斷**: 分析失敗模式與根本原因
- **架構評估**: 評估測試組織與測試策略

### 3️⃣ 優先級改進建議生成
- 基於嚴重程度和影響範圍分級
- 提供具體可執行的改進方案
- 包含實施步驟與預期效果

### 4️⃣ 統一記錄到分析文件
```python
# 統一記錄結構
ANALYSIS_DOCUMENT_STRUCTURE = {
    "執行摘要": "測試結果概述和關鍵指標",
    "詳細分析": {
        "覆蓋率分析": "代碼和功能覆蓋情況",
        "質量評估": "穩定性和有效性分析",
        "問題診斷": "失敗原因和模式"
    },
    "改進建議": {
        "高優先級": "緊急需要修復的問題",
        "中優先級": "應該優化的方面",
        "低優先級": "可考慮改進的方面"
    },
    "實施計劃": "分短期、中期和長期的實施計劃"
}
```

## 🛠️ 執行指南

### 指導方針
1. **統一文件**: 所有分析結果必須記錄到`memory_bank/test_analysis.md`，避免創建多個文件
2. **結構化分析**: 按測試分析框架進行結構化分析
3. **優先級分級**: 清晰標示建議的優先級和嚴重程度
4. **可行性確保**: 提供具體、可行的改進建議而非抽象方向
5. **持續更新**: 更新同一份文件而非創建多個版本

### 分析輸出示例
```markdown
# 測試分析報告

## 📊 執行摘要
- 測試通過率: 85% (下降5%)
- 覆蓋率: 78% (主要模組)
- 關鍵問題: 認證模組測試不穩定

## 🔍 主要發現與建議
1. **認證模塊測試失敗** (高優先級)
   - 問題: 並發用戶登入測試失敗率30%
   - 原因: 連接池配置不當導致間歇性超時
   - 建議: 調整連接池大小並增加重試機制

2. **用戶模組覆蓋不足** (中優先級)
   - 問題: 邊界條件覆蓋率僅60%
   - 建議: 增加極端輸入值和錯誤處理測試

3. **測試執行時間過長** (低優先級)
   - 問題: 完整測試套件執行需45分鐘
   - 建議: 重構數據準備方法，使用測試數據快照
```
